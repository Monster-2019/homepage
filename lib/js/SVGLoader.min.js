import{BufferGeometry,FileLoader,Float32BufferAttribute,Loader,Matrix3,Path,ShapePath,Vector2,Vector3}from"./three.module.min.js";var SVGLoader=function(e){Loader.call(this,e);this.defaultDPI=90;this.defaultUnit="px"};SVGLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:SVGLoader,load:function(t,r,e,a){var i=this;var n=new FileLoader(i.manager);n.setPath(i.path);n.setRequestHeader(i.requestHeader);n.setWithCredentials(i.withCredentials);n.load(t,function(e){try{r(i.parse(e))}catch(e){if(a){a(e)}else{console.error(e)}i.manager.itemError(t)}},e,a)},parse:function(e){var o=this;function c(e,t){if(e.nodeType!==1)return;var r=w(e);var a=true;var i=null;switch(e.nodeName){case"svg":break;case"style":f(e);break;case"g":t=x(e,t);break;case"path":t=x(e,t);if(e.hasAttribute("d"))i=l(e);break;case"rect":t=x(e,t);i=v(e);break;case"polygon":t=x(e,t);i=y(e);break;case"polyline":t=x(e,t);i=h(e);break;case"circle":t=x(e,t);i=p(e);break;case"ellipse":t=x(e,t);i=d(e);break;case"line":t=x(e,t);i=b(e);break;case"defs":a=false;break;case"use":t=x(e,t);var n=e.href.baseVal.substring(1);var o=e.viewportElement.getElementById(n);if(o){c(o,t)}else{console.warn("SVGLoader: 'use node' references non-existent node id: "+n)}break;default:}if(i){if(t.fill!==undefined&&t.fill!=="none"){i.color.setStyle(t.fill)}M(i,B);I.push(i);i.userData={node:e,style:t}}if(a){var s=e.childNodes;for(var u=0;u<s.length;u++){c(s[u],t)}}if(r){L.pop();if(L.length>0){B.copy(L[L.length-1])}else{B.identity()}}}function l(e){var t=new ShapePath;var r=new Vector2;var a=new Vector2;var i=new Vector2;var n=true;var o=false;var s=e.getAttribute("d");var u=s.match(/[a-df-z][^a-df-z]*/gi);for(var c=0,l=u.length;c<l;c++){var f=u[c];var v=f.charAt(0);var y=f.substr(1).trim();if(n===true){o=true;n=false}switch(v){case"M":var h=A(y);for(var p=0,d=h.length;p<d;p+=2){r.x=h[p+0];r.y=h[p+1];a.x=r.x;a.y=r.y;if(p===0){t.moveTo(r.x,r.y)}else{t.lineTo(r.x,r.y)}if(p===0&&o===true)i.copy(r)}break;case"H":var h=A(y);for(var p=0,d=h.length;p<d;p++){r.x=h[p];a.x=r.x;a.y=r.y;t.lineTo(r.x,r.y);if(p===0&&o===true)i.copy(r)}break;case"V":var h=A(y);for(var p=0,d=h.length;p<d;p++){r.y=h[p];a.x=r.x;a.y=r.y;t.lineTo(r.x,r.y);if(p===0&&o===true)i.copy(r)}break;case"L":var h=A(y);for(var p=0,d=h.length;p<d;p+=2){r.x=h[p+0];r.y=h[p+1];a.x=r.x;a.y=r.y;t.lineTo(r.x,r.y);if(p===0&&o===true)i.copy(r)}break;case"C":var h=A(y);for(var p=0,d=h.length;p<d;p+=6){t.bezierCurveTo(h[p+0],h[p+1],h[p+2],h[p+3],h[p+4],h[p+5]);a.x=h[p+2];a.y=h[p+3];r.x=h[p+4];r.y=h[p+5];if(p===0&&o===true)i.copy(r)}break;case"S":var h=A(y);for(var p=0,d=h.length;p<d;p+=4){t.bezierCurveTo(k(r.x,a.x),k(r.y,a.y),h[p+0],h[p+1],h[p+2],h[p+3]);a.x=h[p+0];a.y=h[p+1];r.x=h[p+2];r.y=h[p+3];if(p===0&&o===true)i.copy(r)}break;case"Q":var h=A(y);for(var p=0,d=h.length;p<d;p+=4){t.quadraticCurveTo(h[p+0],h[p+1],h[p+2],h[p+3]);a.x=h[p+0];a.y=h[p+1];r.x=h[p+2];r.y=h[p+3];if(p===0&&o===true)i.copy(r)}break;case"T":var h=A(y);for(var p=0,d=h.length;p<d;p+=2){var b=k(r.x,a.x);var x=k(r.y,a.y);t.quadraticCurveTo(b,x,h[p+0],h[p+1]);a.x=b;a.y=x;r.x=h[p+0];r.y=h[p+1];if(p===0&&o===true)i.copy(r)}break;case"A":var h=A(y);for(var p=0,d=h.length;p<d;p+=7){if(h[p+5]==r.x&&h[p+6]==r.y)continue;var g=r.clone();r.x=h[p+5];r.y=h[p+6];a.x=r.x;a.y=r.y;m(t,h[p],h[p+1],h[p+2],h[p+3],h[p+4],g,r);if(p===0&&o===true)i.copy(r)}break;case"m":var h=A(y);for(var p=0,d=h.length;p<d;p+=2){r.x+=h[p+0];r.y+=h[p+1];a.x=r.x;a.y=r.y;if(p===0){t.moveTo(r.x,r.y)}else{t.lineTo(r.x,r.y)}if(p===0&&o===true)i.copy(r)}break;case"h":var h=A(y);for(var p=0,d=h.length;p<d;p++){r.x+=h[p];a.x=r.x;a.y=r.y;t.lineTo(r.x,r.y);if(p===0&&o===true)i.copy(r)}break;case"v":var h=A(y);for(var p=0,d=h.length;p<d;p++){r.y+=h[p];a.x=r.x;a.y=r.y;t.lineTo(r.x,r.y);if(p===0&&o===true)i.copy(r)}break;case"l":var h=A(y);for(var p=0,d=h.length;p<d;p+=2){r.x+=h[p+0];r.y+=h[p+1];a.x=r.x;a.y=r.y;t.lineTo(r.x,r.y);if(p===0&&o===true)i.copy(r)}break;case"c":var h=A(y);for(var p=0,d=h.length;p<d;p+=6){t.bezierCurveTo(r.x+h[p+0],r.y+h[p+1],r.x+h[p+2],r.y+h[p+3],r.x+h[p+4],r.y+h[p+5]);a.x=r.x+h[p+2];a.y=r.y+h[p+3];r.x+=h[p+4];r.y+=h[p+5];if(p===0&&o===true)i.copy(r)}break;case"s":var h=A(y);for(var p=0,d=h.length;p<d;p+=4){t.bezierCurveTo(k(r.x,a.x),k(r.y,a.y),r.x+h[p+0],r.y+h[p+1],r.x+h[p+2],r.y+h[p+3]);a.x=r.x+h[p+0];a.y=r.y+h[p+1];r.x+=h[p+2];r.y+=h[p+3];if(p===0&&o===true)i.copy(r)}break;case"q":var h=A(y);for(var p=0,d=h.length;p<d;p+=4){t.quadraticCurveTo(r.x+h[p+0],r.y+h[p+1],r.x+h[p+2],r.y+h[p+3]);a.x=r.x+h[p+0];a.y=r.y+h[p+1];r.x+=h[p+2];r.y+=h[p+3];if(p===0&&o===true)i.copy(r)}break;case"t":var h=A(y);for(var p=0,d=h.length;p<d;p+=2){var b=k(r.x,a.x);var x=k(r.y,a.y);t.quadraticCurveTo(b,x,r.x+h[p+0],r.y+h[p+1]);a.x=b;a.y=x;r.x=r.x+h[p+0];r.y=r.y+h[p+1];if(p===0&&o===true)i.copy(r)}break;case"a":var h=A(y);for(var p=0,d=h.length;p<d;p+=7){if(h[p+5]==0&&h[p+6]==0)continue;var g=r.clone();r.x+=h[p+5];r.y+=h[p+6];a.x=r.x;a.y=r.y;m(t,h[p],h[p+1],h[p+2],h[p+3],h[p+4],g,r);if(p===0&&o===true)i.copy(r)}break;case"Z":case"z":t.currentPath.autoClose=true;if(t.currentPath.curves.length>0){r.copy(i);t.currentPath.currentPoint.copy(r);n=true}break;default:console.warn(f)}o=false}return t}function f(e){if(!e.sheet||!e.sheet.cssRules||!e.sheet.cssRules.length)return;for(var t=0;t<e.sheet.cssRules.length;t++){var r=e.sheet.cssRules[t];if(r.type!==1)continue;var a=r.selectorText.split(/,/gm).filter(Boolean).map(e=>e.trim());for(var i=0;i<a.length;i++){C[a[i]]=Object.assign(C[a[i]]||{},r.style)}}}function m(e,t,r,a,i,n,o,s){if(t==0||r==0){e.lineTo(s.x,s.y);return}a=a*Math.PI/180;t=Math.abs(t);r=Math.abs(r);var u=(o.x-s.x)/2;var c=(o.y-s.y)/2;var l=Math.cos(a)*u+Math.sin(a)*c;var f=-Math.sin(a)*u+Math.cos(a)*c;var v=t*t;var y=r*r;var h=l*l;var p=f*f;var d=h/v+p/y;if(d>1){var b=Math.sqrt(d);t=b*t;r=b*r;v=t*t;y=r*r}var x=v*p+y*h;var g=(v*y-x)/x;var m=Math.sqrt(Math.max(0,g));if(i===n)m=-m;var k=m*t*f/r;var A=-m*r*l/t;var w=Math.cos(a)*k-Math.sin(a)*A+(o.x+s.x)/2;var M=Math.sin(a)*k+Math.cos(a)*A+(o.y+s.y)/2;var T=S(1,0,(l-k)/t,(f-A)/r);var V=S((l-k)/t,(f-A)/r,(-l-k)/t,(-f-A)/r)%(Math.PI*2);e.currentPath.absellipse(w,M,t,r,T,T+V,n===0,a)}function S(e,t,r,a){var i=e*r+t*a;var n=Math.sqrt(e*e+t*t)*Math.sqrt(r*r+a*a);var o=Math.acos(Math.max(-1,Math.min(1,i/n)));if(e*a-t*r<0)o=-o;return o}function v(e){var t=g(e.getAttribute("x")||0);var r=g(e.getAttribute("y")||0);var a=g(e.getAttribute("rx")||0);var i=g(e.getAttribute("ry")||0);var n=g(e.getAttribute("width"));var o=g(e.getAttribute("height"));var s=new ShapePath;s.moveTo(t+2*a,r);s.lineTo(t+n-2*a,r);if(a!==0||i!==0)s.bezierCurveTo(t+n,r,t+n,r,t+n,r+2*i);s.lineTo(t+n,r+o-2*i);if(a!==0||i!==0)s.bezierCurveTo(t+n,r+o,t+n,r+o,t+n-2*a,r+o);s.lineTo(t+2*a,r+o);if(a!==0||i!==0){s.bezierCurveTo(t,r+o,t,r+o,t,r+o-2*i)}s.lineTo(t,r+2*i);if(a!==0||i!==0){s.bezierCurveTo(t,r,t,r,t+2*a,r)}return s}function y(e){function t(e,t,r){var a=g(t);var i=g(r);if(o===0){n.moveTo(a,i)}else{n.lineTo(a,i)}o++}var r=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g;var n=new ShapePath;var o=0;e.getAttribute("points").replace(r,t);n.currentPath.autoClose=true;return n}function h(e){function t(e,t,r){var a=g(t);var i=g(r);if(o===0){n.moveTo(a,i)}else{n.lineTo(a,i)}o++}var r=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g;var n=new ShapePath;var o=0;e.getAttribute("points").replace(r,t);n.currentPath.autoClose=false;return n}function p(e){var t=g(e.getAttribute("cx"));var r=g(e.getAttribute("cy"));var a=g(e.getAttribute("r"));var i=new Path;i.absarc(t,r,a,0,Math.PI*2);var n=new ShapePath;n.subPaths.push(i);return n}function d(e){var t=g(e.getAttribute("cx"));var r=g(e.getAttribute("cy"));var a=g(e.getAttribute("rx"));var i=g(e.getAttribute("ry"));var n=new Path;n.absellipse(t,r,a,i,0,Math.PI*2);var o=new ShapePath;o.subPaths.push(n);return o}function b(e){var t=g(e.getAttribute("x1"));var r=g(e.getAttribute("y1"));var a=g(e.getAttribute("x2"));var i=g(e.getAttribute("y2"));var n=new ShapePath;n.moveTo(t,r);n.lineTo(a,i);n.currentPath.autoClose=false;return n}function x(a,i){i=Object.assign({},i);var n={};if(a.hasAttribute("class")){var e=a.getAttribute("class").split(/\s/).filter(Boolean).map(e=>e.trim());for(var t=0;t<e.length;t++){n=Object.assign(n,C["."+e[t]])}}if(a.hasAttribute("id")){n=Object.assign(n,C["#"+a.getAttribute("id")])}function r(e,t,r){if(r===undefined)r=function e(t){if(t.startsWith("url"))console.warn("SVGLoader: url access in attributes is not implemented.");return t};if(a.hasAttribute(e))i[t]=r(a.getAttribute(e));if(n[e])i[t]=r(n[e]);if(a.style&&a.style[e]!=="")i[t]=r(a.style[e])}function o(e){return Math.max(0,Math.min(1,g(e)))}function s(e){return Math.max(0,g(e))}r("fill","fill");r("fill-opacity","fillOpacity",o);r("opacity","opacity",o);r("stroke","stroke");r("stroke-opacity","strokeOpacity",o);r("stroke-width","strokeWidth",s);r("stroke-linejoin","strokeLineJoin");r("stroke-linecap","strokeLineCap");r("stroke-miterlimit","strokeMiterLimit",s);r("visibility","visibility");return i}function k(e,t){return e-(t-e)}function A(e){if(typeof e!=="string"){throw new TypeError("Invalid input: "+typeof e)}var t={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i};var r=0;var a=1;var i=2;var n=3;var o=r;var s=true;var u=[],c="",l="";function f(e,t,r){var a=new SyntaxError('Unexpected character "'+e+'" at index '+t+".");a.partial=r;throw a}function v(){if(c!==""){if(l==="")u.push(Number(c));else u.push(Number(c)*Math.pow(10,Number(l)))}c="";l=""}var y,h=0,p=e.length;for(h=0;h<p;h++){y=e[h];if(o===r){if(t.WHITESPACE.test(y)){continue}if(t.DIGIT.test(y)||t.SIGN.test(y)){o=a;c=y;continue}if(t.POINT.test(y)){o=i;c=y;continue}if(t.COMMA.test(y)){if(s){f(y,h,u)}s=true}}if(o===a){if(t.DIGIT.test(y)){c+=y;continue}if(t.POINT.test(y)){c+=y;o=i;continue}if(t.EXP.test(y)){o=n;continue}if(t.SIGN.test(y)&&c.length===1&&t.SIGN.test(c[0])){f(y,h,u)}}if(o===i){if(t.DIGIT.test(y)){c+=y;continue}if(t.EXP.test(y)){o=n;continue}if(t.POINT.test(y)&&c[c.length-1]==="."){f(y,h,u)}}if(o==n){if(t.DIGIT.test(y)){l+=y;continue}if(t.SIGN.test(y)){if(l===""){l+=y;continue}if(l.length===1&&t.SIGN.test(l)){f(y,h,u)}}}if(t.WHITESPACE.test(y)){v();o=r;s=false}else if(t.COMMA.test(y)){v();o=r;s=true}else if(t.SIGN.test(y)){v();o=a;c=y}else if(t.POINT.test(y)){v();o=i;c=y}else{f(y,h,u)}}v();return u}var s=["mm","cm","in","pt","pc","px"];var u={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function g(e){var t="px";if(typeof e==="string"||e instanceof String){for(var r=0,a=s.length;r<a;r++){var i=s[r];if(e.endsWith(i)){t=i;e=e.substring(0,e.length-i.length);break}}}var n=undefined;if(t==="px"&&o.defaultUnit!=="px"){n=u["in"][o.defaultUnit]/o.defaultDPI}else{n=u[t][o.defaultUnit];if(n<0){n=u[t]["in"]*o.defaultDPI}}return n*parseFloat(e)}function w(e){if(!(e.hasAttribute("transform")||e.nodeName==="use"&&(e.hasAttribute("x")||e.hasAttribute("y")))){return null}var t=r(e);if(L.length>0){t.premultiply(L[L.length-1])}B.copy(t);L.push(t);return t}function r(e){var t=new Matrix3;var r=G;if(e.nodeName==="use"&&(e.hasAttribute("x")||e.hasAttribute("y"))){var a=g(e.getAttribute("x"));var i=g(e.getAttribute("y"));t.translate(a,i)}if(e.hasAttribute("transform")){var n=e.getAttribute("transform").split(")");for(var o=n.length-1;o>=0;o--){var s=n[o].trim();if(s==="")continue;var u=s.indexOf("(");var c=s.length;if(u>0&&u<c){var l=s.substr(0,u);var f=A(s.substr(u+1,c-u-1));r.identity();switch(l){case"translate":if(f.length>=1){var a=f[0];var i=a;if(f.length>=2){i=f[1]}r.translate(a,i)}break;case"rotate":if(f.length>=1){var v=0;var y=0;var h=0;v=-f[0]*Math.PI/180;if(f.length>=3){y=f[1];h=f[2]}O.identity().translate(-y,-h);E.identity().rotate(v);N.multiplyMatrices(E,O);O.identity().translate(y,h);r.multiplyMatrices(O,N)}break;case"scale":if(f.length>=1){var p=f[0];var d=p;if(f.length>=2){d=f[1]}r.scale(p,d)}break;case"skewX":if(f.length===1){r.set(1,Math.tan(f[0]*Math.PI/180),0,0,1,0,0,0,1)}break;case"skewY":if(f.length===1){r.set(1,0,0,Math.tan(f[0]*Math.PI/180),1,0,0,0,1)}break;case"matrix":if(f.length===6){r.set(f[0],f[2],f[4],f[1],f[3],f[5],0,0,1)}break}}t.premultiply(r)}}return t}function M(e,t){function r(e){q.set(e.x,e.y,1).applyMatrix3(t);e.set(q.x,q.y)}var a=T(t);var i=e.subPaths;for(var n=0,o=i.length;n<o;n++){var s=i[n];var u=s.curves;for(var c=0;c<u.length;c++){var l=u[c];if(l.isLineCurve){r(l.v1);r(l.v2)}else if(l.isCubicBezierCurve){r(l.v0);r(l.v1);r(l.v2);r(l.v3)}else if(l.isQuadraticBezierCurve){r(l.v0);r(l.v1);r(l.v2)}else if(l.isEllipseCurve){if(a){console.warn("SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented.")}z.set(l.aX,l.aY);r(z);l.aX=z.x;l.aY=z.y;l.xRadius*=V(t);l.yRadius*=P(t)}}}}function T(e){return e.elements[1]!==0||e.elements[3]!==0}function V(e){var t=e.elements;return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function P(e){var t=e.elements;return Math.sqrt(t[3]*t[3]+t[4]*t[4])}var I=[];var C={};var L=[];var G=new Matrix3;var O=new Matrix3;var E=new Matrix3;var N=new Matrix3;var z=new Vector2;var q=new Vector3;var B=new Matrix3;var t=(new DOMParser).parseFromString(e,"image/svg+xml");c(t.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4});var a={paths:I,xml:t.documentElement};return a}});SVGLoader.getStrokeStyle=function(e,t,r,a,i){e=e!==undefined?e:1;t=t!==undefined?t:"#000";r=r!==undefined?r:"miter";a=a!==undefined?a:"butt";i=i!==undefined?i:4;return{strokeColor:t,strokeWidth:e,strokeLineJoin:r,strokeLineCap:a,strokeMiterLimit:i}};SVGLoader.pointsToStroke=function(e,t,r,a){var i=[];var n=[];var o=[];if(SVGLoader.pointsToStrokeWithBuffers(e,t,r,a,i,n,o)===0){return null}var s=new BufferGeometry;s.setAttribute("position",new Float32BufferAttribute(i,3));s.setAttribute("normal",new Float32BufferAttribute(n,3));s.setAttribute("uv",new Float32BufferAttribute(o,2));return s};SVGLoader.pointsToStrokeWithBuffers=function(){var j=new Vector2;var F=new Vector2;var H=new Vector2;var X=new Vector2;var J=new Vector2;var U=new Vector2;var Y=new Vector2;var Q=new Vector2;var Z=new Vector2;var K=new Vector2;var $=new Vector2;var _=new Vector2;var ee=new Vector2;var te=new Vector2;var re=new Vector2;var ae=new Vector2;var ie=new Vector2;return function(e,s,c,n,u,a,i,t){c=c!==undefined?c:12;n=n!==undefined?n:.001;t=t!==undefined?t:0;e=R(e);var r=e.length;if(r<2)return 0;var o=e[0].equals(e[r-1]);var l;var f=e[0];var v;var y=s.strokeWidth/2;var z=1/(r-1);var h=0;var p;var d;var b;var x=false;var g=0;var m=t*3;var k=t*2;G(e[0],e[1],j).multiplyScalar(y);Q.copy(e[0]).sub(j);Z.copy(e[0]).add(j);K.copy(Q);$.copy(Z);for(var A=1;A<r;A++){l=e[A];if(A===r-1){if(o){v=e[1]}else v=undefined}else{v=e[A+1]}var w=j;G(f,l,w);H.copy(w).multiplyScalar(y);_.copy(l).sub(H);ee.copy(l).add(H);var M=h+z;p=false;if(v!==undefined){G(l,v,F);H.copy(F).multiplyScalar(y);te.copy(l).sub(H);re.copy(l).add(H);d=true;H.subVectors(v,f);if(w.dot(H)<0){d=false}if(A===1)x=d;H.subVectors(v,l);H.normalize();var T=Math.abs(w.dot(H));if(T!==0){var V=y/T;H.multiplyScalar(-V);X.subVectors(l,f);J.copy(X).setLength(V).add(H);ae.copy(J).negate();var q=J.length();var S=X.length();X.divideScalar(S);U.subVectors(v,l);var P=U.length();U.divideScalar(P);if(X.dot(ae)<S&&U.dot(ae)<P){p=true}ie.copy(J).add(l);ae.add(l);b=false;if(p){if(d){re.copy(ae);ee.copy(ae)}else{te.copy(ae);_.copy(ae)}}else{N()}switch(s.strokeLineJoin){case"bevel":B(d,p,M);break;case"round":W(d,p);if(d){E(l,_,te,M,0)}else{E(l,re,ee,M,1)}break;case"miter":case"miter-clip":default:var I=y*s.strokeMiterLimit/q;if(I<1){if(s.strokeLineJoin!=="miter-clip"){B(d,p,M);break}else{W(d,p);if(d){U.subVectors(ie,_).multiplyScalar(I).add(_);Y.subVectors(ie,te).multiplyScalar(I).add(te);O(_,M,0);O(U,M,0);O(l,M,.5);O(l,M,.5);O(U,M,0);O(Y,M,0);O(l,M,.5);O(Y,M,0);O(te,M,0)}else{U.subVectors(ie,ee).multiplyScalar(I).add(ee);Y.subVectors(ie,re).multiplyScalar(I).add(re);O(ee,M,1);O(U,M,1);O(l,M,.5);O(l,M,.5);O(U,M,1);O(Y,M,1);O(l,M,.5);O(Y,M,1);O(re,M,1)}}}else{if(p){if(d){O(Z,h,1);O(Q,h,0);O(ie,M,0);O(Z,h,1);O(ie,M,0);O(ae,M,1)}else{O(Z,h,1);O(Q,h,0);O(ie,M,1);O(Q,h,0);O(ae,M,0);O(ie,M,1)}if(d){te.copy(ie)}else{re.copy(ie)}}else{if(d){O(_,M,0);O(ie,M,0);O(l,M,.5);O(l,M,.5);O(ie,M,0);O(te,M,0)}else{O(ee,M,1);O(ie,M,1);O(l,M,.5);O(l,M,.5);O(ie,M,1);O(re,M,1)}}b=true}break}}else{N()}}else{N()}if(!o&&A===r-1){D(e[0],K,$,d,true,h)}h=M;f=l;Q.copy(te);Z.copy(re)}if(!o){D(l,_,ee,d,false,M)}else if(p&&u){var C=ie;var L=ae;if(x!==d){C=ae;L=ie}if(d){if(b||x){L.toArray(u,0*3);L.toArray(u,3*3);if(b){C.toArray(u,1*3)}}}else{if(b||!x){L.toArray(u,1*3);L.toArray(u,3*3);if(b){C.toArray(u,0*3)}}}}return g;function G(e,t,r){r.subVectors(t,e);return r.set(-r.y,r.x).normalize()}function O(e,t,r){if(u){u[m]=e.x;u[m+1]=e.y;u[m+2]=0;if(a){a[m]=0;a[m+1]=0;a[m+2]=1}m+=3;if(i){i[k]=t;i[k+1]=r;k+=2}}g+=3}function E(e,t,r,a,i){j.copy(t).sub(e).normalize();F.copy(r).sub(e).normalize();var n=Math.PI;var o=j.dot(F);if(Math.abs(o)<1)n=Math.abs(Math.acos(o));n/=c;H.copy(t);for(var s=0,u=c-1;s<u;s++){X.copy(H).rotateAround(e,n);O(H,a,i);O(X,a,i);O(e,a,.5);H.copy(X)}O(X,a,i);O(r,a,i);O(e,a,.5)}function N(){O(Z,h,1);O(Q,h,0);O(_,M,0);O(Z,h,1);O(_,M,1);O(ee,M,0)}function B(e,t,r){if(t){if(e){O(Z,h,1);O(Q,h,0);O(_,M,0);O(Z,h,1);O(_,M,0);O(ae,M,1);O(_,r,0);O(te,r,0);O(ae,r,.5)}else{O(Z,h,1);O(Q,h,0);O(ee,M,1);O(Q,h,0);O(ae,M,0);O(ee,M,1);O(ee,r,1);O(re,r,0);O(ae,r,.5)}}else{if(e){O(_,r,0);O(te,r,0);O(l,r,.5)}else{O(ee,r,1);O(re,r,0);O(l,r,.5)}}}function W(e,t){if(t){if(e){O(Z,h,1);O(Q,h,0);O(_,M,0);O(Z,h,1);O(_,M,0);O(ae,M,1);O(_,h,0);O(l,M,.5);O(ae,M,1);O(l,M,.5);O(te,h,0);O(ae,M,1)}else{O(Z,h,1);O(Q,h,0);O(ee,M,1);O(Q,h,0);O(ae,M,0);O(ee,M,1);O(ee,h,1);O(ae,M,0);O(l,M,.5);O(l,M,.5);O(ae,M,0);O(re,h,1)}}}function D(e,t,r,a,i,n){switch(s.strokeLineCap){case"round":if(i){E(e,r,t,n,.5)}else{E(e,t,r,n,.5)}break;case"square":if(i){j.subVectors(t,e);F.set(j.y,-j.x);H.addVectors(j,F).add(e);X.subVectors(F,j).add(e);if(a){H.toArray(u,1*3);X.toArray(u,0*3);X.toArray(u,3*3)}else{H.toArray(u,1*3);H.toArray(u,3*3);X.toArray(u,0*3)}}else{j.subVectors(r,e);F.set(j.y,-j.x);H.addVectors(j,F).add(e);X.subVectors(F,j).add(e);var o=u.length;if(a){H.toArray(u,o-1*3);X.toArray(u,o-2*3);X.toArray(u,o-4*3)}else{H.toArray(u,o-2*3);X.toArray(u,o-1*3);X.toArray(u,o-4*3)}}break;case"butt":default:break}}function R(e){var t=false;for(var r=1,a=e.length-1;r<a;r++){if(e[r].distanceTo(e[r+1])<n){t=true;break}}if(!t)return e;var i=[];i.push(e[0]);for(var r=1,a=e.length-1;r<a;r++){if(e[r].distanceTo(e[r+1])>=n){i.push(e[r])}}i.push(e[e.length-1]);return i}}}();export{SVGLoader};